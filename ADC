
analog begin
  @(cross(V(clk)-clk_vth, +1)) begin
    sample = V(in);
    for(i=7;i>=0;i=i-1) begin
    if (sample > 0.9) begin
      result[i] = out_high;
      sample = sample-0.9;
    end
    else begin
      result[i] = out_low;
    end
    sample = 2*sample;
  end
end
